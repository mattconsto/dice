<!DOCTYPE html>
<html>
<head>
	<title>Dice Roller</title>
	<script src="dice.min.js"></script>
	<style>
		html {
			height:		100%;
		}
		body {
			width:		300px;
			margin:		0 auto;
			position:	relative;
			top:		100px;
		}
		#dicebuttons {
			display:	flex;
		}
		#dicebuttons button {
			flex-grow:	8;
		}
		input[type="text"] {
			width:		100%;
			box-sizing:	border-box;
		}
	</style>
</head>
<body>
	<header>
		<h1>Dice Roller</h1>
		<h3>A Jison DnD style dice roller<h3>
	</header>

	<main>
		<p id="dicebuttons"><button>d2</button><button>d4</button><button>d6</button><button>d8</button><button>d10</button><button>d12</button><button>d20</button><button>d100</button><button>df</button></p>
		<p><input type="text" id="input" value="4d6h2+2" /></p>
		<p><output id="output"></output></p>
		<p><button onclick="calculate();">Roll</button></p>
	</main>
</body>
	<script>
		function calculate() {
			try {
				document.getElementById("output").innerText = document.getElementById("input").value + " = " + dice.parse(document.getElementById("input").value);
			}
			catch (e) {
				document.getElementById("output").innerText = e;
			}
		}
		
		calculate();
		
		var buttons = document.querySelectorAll("#dicebuttons button"), i;

		for (i = 0; i < buttons.length; ++i) {
			buttons[i].onclick = function(event) {
				document.getElementById("input").value = event.target.innerText;
				calculate();
			}
		}
		
		document.getElementById("input").addEventListener("keyup", function(event) {
			event.preventDefault();
			if (event.keyCode == 13) calculate();
		});
	</script>
</html>